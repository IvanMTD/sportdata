<div class="container-fluid">
    <div class="row">
        <div class="col"></div>
        <div class="col-6">
            <h1 class="text-center">
                Карта базовых видов спорта по субъектам
            </h1>
        </div>
        <div class="col"></div>
    </div>
    <div class="row py-5">
        <div class="col"></div>
        <div class="col-10">
            <script th:inline="javascript">
                let subjects = [[${subjects}]];
                google.charts.load('current', {
                    'packages':['geochart'],
                    // Note: you will need to get a mapsApiKey for your project.
                    // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
                    'mapsApiKey': 'YOUR_KEY'
                });
                google.charts.setOnLoadCallback(drawRegionsMap);

                function drawRegionsMap(){
                    let dataTable = new google.visualization.DataTable();
                    console.log(subjects);
                    dataTable.addColumn('string','Субъект');
                    dataTable.addColumn('number','Количество базовых видов спорта>');
                    dataTable.addColumn({type: 'string', role: 'tooltip'});

                    for(let i=0; i<subjects.length; i++){
                        let row = [];
                        row[0] = subjects[i].iso;
                        row[1] = subjects[i].baseSports.length
                        row[2] = subjects[i].title + '\n' + 'Всего базовых видов спорта: ' + subjects[i].baseSports.length;
                        dataTable.addRows([row]);
                    }

                    var options = {
                        region: 'RU', // Россия
                        resolution: 'provinces', // регионы
                        colorAxis: {colors: ['red', 'yellow', 'green']}, // цвета
                    };

                    var chart = new google.visualization.GeoChart(document.getElementById('geochart_div'));
                    chart.draw(dataTable, options);
                }
            </script>
            <div id="geochart_div" style="width: 100%; height: auto;"></div>
        </div>
        <div class="col"></div>
    </div>
</div>